name: ci-cd
on:
  workflow_dispatch:


jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: 20 }
      - name: User service install
        working-directory: services/user-service
        run: npm ci
      - name: Appointment service install
        working-directory: services/appointment-service
        run: npm ci
      - name: Frontend install & build
        working-directory: frontend
        run: |
          npm ci
          npm run build

  deploy:
    if: github.ref == 'refs/heads/main' && false
    runs-on: ubuntu-latest
    needs: build-and-test
    steps:
      - run: echo "Placeholder deploy to AWS (ECS/EC2). Configure with secrets."
